"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAuditEntryDetails = getAuditEntryDetails;

var _lodash = require("lodash");

var _ = require("../");

function getAuditEntryDetails(data) {
  const {
    entity,
    timezone
  } = data;
  const {
    createdAt,
    gps,
    items,
    score
  } = entity;
  const locationText = (0, _.getLocationReference)(data);
  const gpsText = (0, _lodash.get)(gps, 'reverseGeocoded.label', 'Unknown Location');
  const groupedData = (0, _.getAuditItemsData)(items, data);
  const referenceDetails = (0, _.getReferenceDetails)(data);
  const scoreText = (0, _.getValueAsPercentage)(score.result);
  const timezoneHourTime = (0, _.getTimezoneDatetime)({
    format: 'h:mm a',
    timestamp: createdAt,
    timezone
  });
  const timezoneDatetime = (0, _.getTimezoneDatetime)({
    timestamp: createdAt,
    timezone
  });
  return {
    gpsText,
    groupedData,
    locationText,
    referenceLabel: referenceDetails.label,
    referenceValue: referenceDetails.value,
    scoreText,
    timezoneHourTime,
    timezoneDatetime
  };
}