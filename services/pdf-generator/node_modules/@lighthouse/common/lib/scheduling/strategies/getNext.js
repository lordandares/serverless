import moment from 'moment-timezone';
import { Unit } from '../scheduling.types';
/**
 * Generates next occurrence interval for stopwatch and window strategy
 */

export function getNext(_ref) {
  var end = _ref.end,
      isInitial = _ref.isInitial,
      options = _ref.options,
      start = _ref.start,
      timezone = _ref.timezone;
  var duration = options.duration,
      frequency = options.frequency;
  var durationUnit = duration.unit,
      durationValue = duration.value;
  var frequencyUnit = frequency.unit,
      frequencyValue = frequency.value;
  var nextOccurrenceEnd = isInitial ? moment.tz(start, timezone).add(frequencyValue, frequencyUnit).valueOf() : moment.tz(start, timezone).add(1, Unit.Millisecond).add(frequencyValue, frequencyUnit).valueOf();
  var nextOccurrenceStart = moment.tz(nextOccurrenceEnd, timezone).subtract(durationValue, durationUnit).valueOf();
  if (nextOccurrenceEnd <= nextOccurrenceStart || nextOccurrenceEnd > end) return;
  return [nextOccurrenceStart, nextOccurrenceEnd - 1];
}
//# sourceMappingURL=getNext.js.map