/** @license @azure/core-http
  * Copyright (c) Microsoft Corporation. All rights reserved.
  * Licensed under the MIT License. See License.txt and ThirdPartyNotices.txt in the project root for license information.
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).Azure=e.Azure||{},e.Azure.Core=e.Azure.Core||{},e.Azure.Core.HTTP={}))}(this,function(e){"use strict";function t(e){return e.toLowerCase()}var r=function(){function e(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}return e.prototype.set=function(e,r){this._headersMap[t(e)]={name:e,value:r.toString()}},e.prototype.get=function(e){var r=this._headersMap[t(e)];return r?r.value:void 0},e.prototype.contains=function(e){return!!this._headersMap[t(e)]},e.prototype.remove=function(e){var r=this.contains(e);return delete this._headersMap[t(e)],r},e.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},e.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},e.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},e.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},e.prototype.toJson=function(){return this.rawHeaders()},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.prototype.clone=function(){return new e(this.rawHeaders())},e}();function n(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function o(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}for(var i=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}),a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);var u=function(e,t){var r=t||0,n=a;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")};var l=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[n+a]=o[a];return t||u(o)},c={coreHttpVersion:"1.0.0-preview.2",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}},f=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/gi,p="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function h(e){var t={};return t.body=e.bodyAsText,t.headers=e.headers,t.status=e.status,t}function d(e){var t=e.clone();return t.headers&&t.headers.remove("authorization"),t}function y(e){return f.test(e)}function v(){return l()}function m(e,t){return new Promise(function(r){return setTimeout(function(){return r(t)},e)})}var g=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function b(e){return g.test(e)}function w(e,t,r){return e&&t?e.split(t).join(r||""):e}var E=function(){function e(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}return e.prototype.validateConstraints=function(e,t,r){var n=function(e,n){throw new Error('"'+r+'" with value "'+t+'" should satisfy the constraint "'+e+'": '+n+".")};if(e.constraints&&null!=t){var o=e.constraints,i=o.ExclusiveMaximum,a=o.ExclusiveMinimum,s=o.InclusiveMaximum,u=o.InclusiveMinimum,l=o.MaxItems,c=o.MaxLength,f=o.MinItems,p=o.MinLength,h=o.MultipleOf,d=o.Pattern,y=o.UniqueItems;if(null!=i&&t>=i&&n("ExclusiveMaximum",i),null!=a&&t<=a&&n("ExclusiveMinimum",a),null!=s&&t>s&&n("InclusiveMaximum",s),null!=u&&t<u&&n("InclusiveMinimum",u),null!=l&&t.length>l&&n("MaxItems",l),null!=c&&t.length>c&&n("MaxLength",c),null!=f&&t.length<f&&n("MinItems",f),null!=p&&t.length<p&&n("MinLength",p),null!=h&&t%h!=0&&n("MultipleOf",h),d){var v="string"==typeof d?new RegExp(d):d;"string"==typeof t&&null!==t.match(v)||n("Pattern",d)}y&&t.some(function(e,t,r){return r.indexOf(e)!==t})&&n("UniqueItems",y)}},e.prototype.serialize=function(e,t,r){var o={},i=e.type.name;r||(r=e.serializedName),null!==i.match(/^Sequence$/gi)&&(o=[]),e.isConstant&&(t=e.defaultValue);var a=e.required,s=e.nullable;if(a&&s&&void 0===t)throw new Error(r+" cannot be undefined.");if(a&&!s&&null==t)throw new Error(r+" cannot be null or undefined.");if(!a&&!1===s&&null===t)throw new Error(r+" cannot be null.");if(null==t)o=t;else if(this.validateConstraints(e,t,r),null!==i.match(/^any$/gi))o=t;else if(null!==i.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi))o=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||!y(r))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/gi)){var n=typeof r;if(!("string"===n||"function"===n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||"function"==typeof Blob&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}return r}(i,r,t);else if(null!==i.match(/^Enum$/gi)){o=function(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(!t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".");return r}(r,e.type.allowedValues,t)}else null!==i.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?o=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!b(t))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');t=t}return t}(i,t,r):null!==i.match(/^ByteArray$/gi)?o=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=n(t)}return t}(r,t):null!==i.match(/^Base64Url$/gi)?o=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=function(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){var r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(n(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}(r,t):null!==i.match(/^Sequence$/gi)?o=function(e,t,r,n){if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var o=t.type.element;if(!o||"object"!=typeof o)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var i=[],a=0;a<r.length;a++)i[a]=e.serialize(o,r[a],n);return i}(this,e,t,r):null!==i.match(/^Dictionary$/gi)?o=function(e,t,r,n){if("object"!=typeof r)throw new Error(n+" must be of type object.");var o=t.type.value;if(!o||"object"!=typeof o)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var i={},a=0,s=Object.keys(r);a<s.length;a++){var u=s[a];i[u]=e.serialize(o,r[u],n+"."+u)}return i}(this,e,t,r):null!==i.match(/^Composite$/gi)&&(o=function(e,t,r,n){var o;S(e,t)&&(t=_(e,t,r,"clientName"));if(null!=r){for(var i={},a=T(e,t,n),s=0,u=Object.keys(a);s<u.length;s++){var l=u[s],c=a[l];if(!c.readOnly){var f=void 0,p=i;if(e.isXML)f=c.xmlIsWrapped?c.xmlName:c.xmlElementName||c.xmlName;else{var h=R(c.serializedName);f=h.pop();for(var d=0,y=h;d<y.length;d++){var v=y[d];null==p[v]&&null!=r[l]&&(p[v]={}),p=p[v]}}if(null!=p){var m=""!==c.serializedName?n+"."+c.serializedName:n,g=r[l],b=S(e,t);b&&b.clientName===l&&null==g&&(g=t.serializedName);var w=e.serialize(c,g,m);void 0!==w&&null!=f&&(c.xmlIsAttribute?(p.$=p.$||{},p.$[f]=w):c.xmlIsWrapped?p[f]=((o={})[c.xmlElementName]=w,o):p[f]=w)}}}var E=t.type.additionalProperties;if(E){var P=Object.keys(a),x=function(t){P.every(function(e){return e!==t})&&(i[t]=e.serialize(E,r[t],n+'["'+t+'"]'))};for(var O in r)x(O)}return i}return r}(this,e,t,r));return o},e.prototype.deserialize=function(e,t,r){if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;var n,i=e.type.name;return r||(r=e.serializedName),null!==i.match(/^Composite$/gi)?n=function(e,t,r,n){S(e,t)&&(t=_(e,t,r,"serializedName"));for(var o=T(e,t,n),i={},a=[],s=0,u=Object.keys(o);s<u.length;s++){var l=u[s],c=o[l],f=R(o[l].serializedName);a.push(f[0]);var p=c.serializedName,h=c.xmlName,d=c.xmlElementName,y=n;""!==p&&void 0!==p&&(y=n+"."+p);var v=c.headerCollectionPrefix;if(v){for(var m={},g=0,b=Object.keys(r);g<b.length;g++){var w=b[g];w.startsWith(v)&&(m[w.substring(v.length)]=e.deserialize(c.type.value,r[w],y)),a.push(w)}i[l]=m}else if(e.isXML)if(c.xmlIsAttribute&&r.$)i[l]=e.deserialize(c,r.$[h],y);else{var E=r[d||h||p];if(c.xmlIsWrapped)void 0===(E=(E=r[h])&&E[d])&&(E=[]);i[l]=e.deserialize(c,E,y)}else{for(var x=void 0,O=r,A=0,q=f;A<q.length;A++){var C=q[A];if(!O)break;O=O[C]}x=O;var N=t.type.polymorphicDiscriminator;N&&l===N.clientName&&null==x&&(x=t.serializedName);var D=void 0;Array.isArray(r[l])&&""===o[l].serializedName?(x=r[l],i=e.deserialize(c,x,y)):void 0===x&&void 0===c.defaultValue||(D=e.deserialize(c,x,y),i[l]=D)}}var I=t.type.additionalProperties;if(I){var M=function(e){for(var t in o){if(R(o[t].serializedName)[0]===e)return!1}return!0};for(var U in r)M(U)&&(i[U]=e.deserialize(I,r[U],n+'["'+U+'"]'))}else if(r)for(var k=0,H=Object.keys(r);k<H.length;k++){l=H[k];void 0!==i[l]||a.includes(l)||P(l)||(i[l]=r[l])}return i}(this,e,t,r):(this.isXML&&null!=t.$&&null!=t._&&(t=t._),null!==i.match(/^Number$/gi)?(n=parseFloat(t),isNaN(n)&&(n=t)):null!==i.match(/^Boolean$/gi)?n="true"===t||"false"!==t&&t:null!==i.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/gi)?n=t:null!==i.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?n=new Date(t):null!==i.match(/^UnixTime$/gi)?n=function(e){if(!e)return;return new Date(1e3*e)}(t):null!==i.match(/^ByteArray$/gi)?n=o(t):null!==i.match(/^Base64Url$/gi)?n=function(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return o(e=e.replace(/\-/g,"+").replace(/\_/g,"/"))}(t):null!==i.match(/^Sequence$/gi)?n=function(e,t,r,n){var o=t.type.element;if(!o||"object"!=typeof o)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var i=[],a=0;a<r.length;a++)i[a]=e.deserialize(o,r[a],n+"["+a+"]");return i}return r}(this,e,t,r):null!==i.match(/^Dictionary$/gi)&&(n=function(e,t,r,n){var o=t.type.value;if(!o||"object"!=typeof o)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var i={},a=0,s=Object.keys(r);a<s.length;a++){var u=s[a];i[u]=e.deserialize(o,r[u],n)}return i}return r}(this,e,t,r))),e.isConstant&&(n=e.defaultValue),n},e}();function R(e){var t=[],r="";if(e)for(var n=0,o=e.split(".");n<o.length;n++){var i=o[n];"\\"===i.charAt(i.length-1)?r+=i.substr(0,i.length-1)+".":(r+=i,t.push(r),r="")}return t}function T(e,t,r){var n=t.type.modelProperties;if(!n){var o=t.type.className;if(!o)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');var i=e.modelMappers[o];if(!i)throw new Error('mapper() cannot be null or undefined for model "'+o+'".');if(!(n=i.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(i)+'" of type "'+o+'" for object "'+r+'".')}return n}function P(e){return["$","_"].includes(e)}function _(e,t,r,n){var o=S(e,t);if(o){var i=o[n];if(null!=i){var a=r[i];if(null!=a){var s=t.type.uberParent||t.type.className,u=a===s?a:s+"."+a,l=e.modelMappers.discriminators[u];l&&(t=l)}}}return t}function S(e,t){return t.type.polymorphicDiscriminator||x(e,t.type.uberParent)||x(e,t.type.className)}function x(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}var O=function(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];t[o]=o}return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]),A=function(){function e(e,t,n,o,i,a,s,u,l,c,f,p,h){this.streamResponseBody=a,this.url=e||"",this.method=t||"GET",this.headers=i instanceof r?i:new r(i),this.body=n,this.query=o,this.formData=void 0,this.withCredentials=s||!1,this.abortSignal=u,this.timeout=l||0,this.onUploadProgress=c,this.onDownloadProgress=f,this.proxySettings=p,this.keepAlive=h}return e.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},e.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(null==e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!=e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var r=e.pathTemplate,n=e.pathParameters;if("string"!=typeof r)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var o=e.baseUrl,i=o+(o.endsWith("/")?"":"/")+(r.startsWith("/")?r.slice(1):r),a=i.match(/({\w*\s*\w*})/gi);if(a&&a.length){if(!n)throw new Error("pathTemplate: "+r+" has been provided. Hence, options.pathParameters must also be provided.");a.forEach(function(e){var t=e.slice(1,-1),o=n[t];if(null==o||"string"!=typeof o&&"object"!=typeof o){var a=JSON.stringify(n,void 0,2);throw new Error("pathTemplate: "+r+" contains the path parameter "+t+" however, it is not present in parameters: "+a+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.')}if("string"==typeof o.valueOf()&&(i=i.replace(e,encodeURIComponent(o))),"object"==typeof o.valueOf()){if(!o.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');i=o.skipUrlEncoding?i.replace(e,o.value):i.replace(e,encodeURIComponent(o.value))}})}this.url=i}if(e.queryParameters){var s=e.queryParameters;if("object"!=typeof s)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var u=[];for(var l in this.query={},s){var c=s[l];if(c)if("string"==typeof c)u.push(l+"="+encodeURIComponent(c)),this.query[l]=encodeURIComponent(c);else if("object"==typeof c){if(!c.value)throw new Error("options.queryParameters["+l+'] is of type "object" but it does not contain a "value" property.');c.skipUrlEncoding?(u.push(l+"="+c.value),this.query[l]=c.value):(u.push(l+"="+encodeURIComponent(c.value)),this.query[l]=encodeURIComponent(c.value))}}this.url+=u.join("&")}if(e.headers)for(var f=e.headers,p=0,h=Object.keys(e.headers);p<h.length;p++){var d=h[p];this.headers.set(d,f[d])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",v()),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,null!=e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new E(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},e.prototype.clone=function(){var t=new e(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive);return this.formData&&(t.formData=this.formData),this.operationSpec&&(t.operationSpec=this.operationSpec),this.shouldDeserialize&&(t.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(t.operationResponseGetter=this.operationResponseGetter),t},e}(),q=function(e,t){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function C(e,t){function r(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var N=function(){return(N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function D(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})}function I(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function M(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function U(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function k(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(U(arguments[t]));return e}var H=new WeakMap,z=new WeakMap,j=function(){function e(){this.onabort=null,H.set(this,[]),z.set(this,!1)}return Object.defineProperty(e.prototype,"aborted",{get:function(){if(!z.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return z.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"none",{get:function(){return new e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){if(!H.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");H.get(this).push(t)},e.prototype.removeEventListener=function(e,t){if(!H.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var r=H.get(this),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.dispatchEvent=function(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},e}();function L(e){if(!e.aborted){e.onabort&&e.onabort.call(e);var t=H.get(e);t&&t.forEach(function(t){t.call(e,{type:"abort"})}),z.set(e,!0)}}var B,F=function(e){function t(t){var r=e.call(this,t)||this;return r.name="AbortError",r}return C(t,e),t}(Error),Q=(function(){function e(e){var t=this;if(this._signal=new j,e){Array.isArray(e)||(e=arguments);for(var r=0,n=e;r<n.length;r++){var o=n[r];o.aborted?this.abort():o.addEventListener("abort",function(){t.abort()})}}}Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),e.prototype.abort=function(){L(this._signal)},e.timeout=function(e){var t=new j,r=setTimeout(L,e,t);return"function"==typeof r.unref&&r.unref(),t}}(),function(e){function t(r,n,o,i,a){var s=e.call(this,r)||this;return s.code=n,s.statusCode=o,s.request=i,s.response=a,Object.setPrototypeOf(s,t.prototype),s}return C(t,e),t.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",t.PARSE_ERROR="PARSE_ERROR",t}(Error)),$=function(){function e(){}return e.prototype.sendRequest=function(e){var t=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");var r=e.abortSignal;if(r){if(r.aborted)return Promise.reject(new F("The operation was aborted."));var n=function(){t.abort()};r.addEventListener("abort",n),t.addEventListener("readystatechange",function(){t.readyState===XMLHttpRequest.DONE&&r.removeEventListener("abort",n)})}if(V(t.upload,e.onUploadProgress),V(t,e.onDownloadProgress),e.formData){for(var o=e.formData,i=new FormData,a=function(e,t){t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?i.append(e,t.value,t.options):i.append(e,t)},s=0,u=Object.keys(o);s<u.length;s++){var l=u[s],c=o[l];if(Array.isArray(c))for(var f=0;f<c.length;f++)a(l,c[f]);else a(l,c)}e.body=i,e.formData=void 0;var p=e.headers.get("Content-Type");p&&-1!==p.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}t.open(e.method,e.url),t.timeout=e.timeout,t.withCredentials=e.withCredentials;for(var h=0,d=e.headers.headersArray();h<d.length;h++){var y=d[h];t.setRequestHeader(y.name,y.value)}return t.responseType=e.streamResponseBody?"blob":"text",t.send(void 0===e.body?null:e.body),e.streamResponseBody?new Promise(function(r,n){t.addEventListener("readystatechange",function(){if(t.readyState===XMLHttpRequest.HEADERS_RECEIVED){var n=new Promise(function(r,n){t.addEventListener("load",function(){r(t.response)}),X(e,t,n)});r({request:e,status:t.status,headers:W(t),blobBody:n})}}),X(e,t,n)}):new Promise(function(r,n){t.addEventListener("load",function(){return r({request:e,status:t.status,headers:W(t),bodyAsText:t.responseText})}),X(e,t,n)})},e}();function V(e,t){t&&e.addEventListener("progress",function(e){return t({loadedBytes:e.loaded})})}function W(e){for(var t=new r,n=0,o=e.getAllResponseHeaders().trim().split(/[\r\n]+/);n<o.length;n++){var i=o[n],a=i.indexOf(":"),s=i.slice(0,a),u=i.slice(a+2);t.set(s,u)}return t}function X(e,t,r){t.addEventListener("error",function(){return r(new Q("Failed to send request to "+e.url,Q.REQUEST_SEND_ERROR,void 0,e))}),t.addEventListener("abort",function(){return r(new F("The operation was aborted."))}),t.addEventListener("timeout",function(){return r(new Q("timeout of "+t.timeout+"ms exceeded",Q.REQUEST_SEND_ERROR,void 0,e))})}function Y(e){return e&&"function"==typeof e.getToken&&(void 0===e.signRequest||e.getToken.length>0)}(B=e.HttpPipelineLogLevel||(e.HttpPipelineLogLevel={}))[B.OFF=0]="OFF",B[B.ERROR=1]="ERROR",B[B.WARNING=2]="WARNING",B[B.INFO=3]="INFO";var G=function(){function e(){this._rawQuery={}}return e.prototype.any=function(){return Object.keys(this._rawQuery).length>0},e.prototype.keys=function(){return Object.keys(this._rawQuery)},e.prototype.set=function(e,t){if(e)if(null!=t){var r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]},e.prototype.get=function(e){return e?this._rawQuery[e]:void 0},e.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],o=0,i=r;o<i.length;o++){var a=i[o];n.push(t+"="+a)}e+=n.join("&")}else e+=t+"="+r}return e},e.parse=function(t){var r=new e;if(t){t.startsWith("?")&&(t=t.substring(1));for(var n="ParameterName",o="",i="",a=0;a<t.length;++a){var s=t[a];switch(n){case"ParameterName":switch(s){case"=":n="ParameterValue";break;case"&":o="",i="";break;default:o+=s}break;case"ParameterValue":switch(s){case"=":o="",i="",n="Invalid";break;case"&":r.set(o,i),o="",i="",n="ParameterName";break;default:i+=s}break;case"Invalid":"&"===s&&(n="ParameterName");break;default:throw new Error("Unrecognized URLQuery parse state: "+n)}}"ParameterValue"===n&&r.set(o,i)}return r},e}(),J=function(){function e(){}return e.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},e.prototype.getScheme=function(){return this._scheme},e.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},e.prototype.getHost=function(){return this._host},e.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},e.prototype.getPort=function(){return this._port},e.prototype.setPath=function(e){e?-1!==e.indexOf("://")?this.set(e,"SCHEME"):this.set(e,"PATH"):this._path=void 0},e.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},e.prototype.getPath=function(){return this._path},e.prototype.setQuery=function(e){this._query=e?G.parse(e):void 0},e.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new G),this._query.set(e,t))},e.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},e.prototype.getQuery=function(){return this._query?this._query.toString():void 0},e.prototype.set=function(e,t){for(var r=new Z(e,t);r.next();){var n=r.current();if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":var o=n.text||void 0;this._path&&"/"!==this._path&&"/"===o||(this._path=o);break;case"QUERY":this._query=G.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},e.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},e.prototype.replaceAll=function(e,t){e&&(this.setScheme(w(this.getScheme(),e,t)),this.setHost(w(this.getHost(),e,t)),this.setPort(w(this.getPort(),e,t)),this.setPath(w(this.getPath(),e,t)),this.setQuery(w(this.getQuery(),e,t)))},e.parse=function(t){var r=new e;return r.set(t,"SCHEME_OR_HOST"),r},e}(),K=function(){function e(e,t){this.text=e,this.type=t}return e.scheme=function(t){return new e(t,"SCHEME")},e.host=function(t){return new e(t,"HOST")},e.port=function(t){return new e(t,"PORT")},e.path=function(t){return new e(t,"PATH")},e.query=function(t){return new e(t,"QUERY")},e}();var Z=function(){function e(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}return e.prototype.current=function(){return this._currentToken},e.prototype.next=function(){if(ee(this))switch(this._currentState){case"SCHEME":t=function(e){return oe(e,function(e){return function(e){var t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)})}(e=this),e._currentToken=K.scheme(t),ee(e)?e._currentState="HOST":e._currentState="DONE";break;case"SCHEME_OR_HOST":!function(e){var t=ie(e,":","/","?");ee(e)?":"===te(e)?"://"===ne(e,3)?(e._currentToken=K.scheme(t),e._currentState="HOST"):(e._currentToken=K.host(t),e._currentState="PORT"):(e._currentToken=K.host(t),"/"===te(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=K.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===ne(e,3)&&re(e,3);var t=ie(e,":","/","?");e._currentToken=K.host(t),ee(e)?":"===te(e)?e._currentState="PORT":"/"===te(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===te(e)&&re(e);var t=ie(e,"/","?");e._currentToken=K.port(t),ee(e)?"/"===te(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){var t=ie(e,"?");e._currentToken=K.path(t),ee(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===te(e)&&re(e);var t=function(e){var t="";e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength);return t}(e);e._currentToken=K.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;var e,t;return!!this._currentToken},e}();function ee(e){return e._currentIndex<e._textLength}function te(e){return e._text[e._currentIndex]}function re(e,t){ee(e)&&(t||(t=1),e._currentIndex+=t)}function ne(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function oe(e,t){for(var r="";ee(e);){var n=te(e);if(!t(n))break;r+=n,re(e)}return r}function ie(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return oe(e,function(e){return-1===t.indexOf(e)})}var ae=function(){function e(e,t){this._nextPolicy=e,this._options=t}return e.prototype.shouldLog=function(e){return this._options.shouldLog(e)},e.prototype.log=function(e,t){this._options.log(e,t)},e}(),se=function(){function t(e){this._logger=e}return t.prototype.shouldLog=function(t){return!!this._logger&&t!==e.HttpPipelineLogLevel.OFF&&t<=this._logger.minimumLogLevel},t.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},t}(),ue=console.debug||console.log;var le,ce="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,fe=[],pe=[],he=[];function de(e){var t,r,n,o;le=e,fe=[],pe=[];var i=/\*/g,a=e.split(",").map(function(e){return e.trim().replace(i,".*?")});try{for(var s=M(a),u=s.next();!u.done;u=s.next()){var l=u.value;l.startsWith("-")?pe.push(new RegExp("^"+l.substr(1)+"$")):fe.push(new RegExp("^"+l+"$"))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}try{for(var c=M(he),f=c.next();!f.done;f=c.next()){var p=f.value;p.enabled=ye(p.namespace)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}function ye(e){var t,r,n,o;if(e.endsWith("*"))return!0;try{for(var i=M(pe),a=i.next();!a.done;a=i.next()){if(a.value.test(e))return!1}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}try{for(var s=M(fe),u=s.next();!u.done;u=s.next()){if(u.value.test(e))return!0}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return!1}function ve(e){var t=Object.assign(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.enabled&&(r.length>0&&(r[0]=e+" "+r[0]),t.log.apply(t,k(r)))},{enabled:ye(e),destroy:me,log:we.log,namespace:e,extend:ge});return he.push(t),t}function me(){var e=he.indexOf(this);return e>=0&&(he.splice(e,1),!0)}function ge(e){var t=ve(this.namespace+":"+e);return t.log=this.log,t}ce&&de(ce);var be,we=Object.assign(function(e){return ve(e)},{enable:de,enabled:ye,disable:function(){var e=le||"";return de(""),e},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ue.apply(void 0,k(e))}}),Ee=new Set,Re="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,Te=we("azure");Te.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];we.log.apply(we,k(e))};var Pe=["verbose","info","warning","error"];Re&&(Ae(Re)?function(e){var t,r;if(e&&!Ae(e))throw new Error("Unknown log level '"+e+"'. Acceptable values: "+Pe.join(","));be=e;var n=[];try{for(var o=M(Ee),i=o.next();!i.done;i=o.next()){var a=i.value;Oe(a)&&n.push(a.namespace)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}we.enable(n.join(","))}(Re):console.error("AZURE_LOG_LEVEL set to unknown log level '"+Re+"'; logging is not enabled. Acceptable values: "+Pe.join(", ")+"."));var _e={verbose:400,info:300,warning:200,error:100};function Se(e,t){t.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.log.apply(e,k(t))}}function xe(e,t){var r=Object.assign(e.extend(t),{level:t});if(Se(e,r),Oe(r)){var n=we.disable();we.enable(n+","+r.namespace)}return Ee.add(r),r}function Oe(e){return!!(be&&_e[e.level]<=_e[be])}function Ae(e){return Pe.includes(e)}var qe,Ce,Ne=(qe="core-http",Ce=Te.extend(qe),Se(Te,Ce),{error:xe(Ce,"error"),warning:xe(Ce,"warning"),info:xe(Ce,"info"),verbose:xe(Ce,"verbose")}),De=["x-ms-client-request-id","x-ms-return-client-request-id","traceparent","Accept","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],Ie=["api-version"],Me={logger:void 0,logPolicyOptions:{allowedHeaderNames:[],allowedQueryParameters:[]}};function Ue(e,t){return void 0===e&&(e=Ne.info.bind(Ne)),void 0===t&&(t={}),{create:function(r,n){return new ke(r,n,e,t)}}}var ke=function(e){function t(t,r,n,o){void 0===n&&(n=console.log);var i=void 0===o?{}:o,a=i.allowedHeaderNames,s=void 0===a?[]:a,u=i.allowedQueryParameters,l=void 0===u?[]:u,c=e.call(this,t,r)||this;return c.logger=n,s=s&&s instanceof Array?De.concat(s):De,l=l&&l instanceof Array?Ie.concat(l):Ie,c.allowedHeaderNames=new Set(s),c.allowedQueryParameters=new Set(l),c}return C(t,e),t.prototype.sendRequest=function(e){var t=this;return Ne.info.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then(function(e){return t.logResponse(e)})):this._nextPolicy.sendRequest(e)},t.prototype.logRequest=function(e){this.logger("Request: "+JSON.stringify(e,this.sanitize.bind(this),2))},t.prototype.sanitize=function(e,t){return"_headersMap"===e?this.sanitizeHeaders(e,t):"url"===e?this.sanitizeUrl(t):"query"===e?this.sanitizeQuery(t):"body"!==e&&"response"!==e&&"operationSpec"!==e?t:void 0},t.prototype.sanitizeHeaders=function(e,t){return this.sanitizeObject(t,this.allowedHeaderNames,function(e,t){return e[t].value})},t.prototype.sanitizeQuery=function(e){return this.sanitizeObject(e,this.allowedQueryParameters,function(e,t){return e[t]})},t.prototype.sanitizeObject=function(e,t,r){if("object"!=typeof e||null===e)return e;for(var n={},o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];t.has(a)?n[a]=r(e,a):n[a]="REDACTED"}return n},t.prototype.sanitizeUrl=function(e){if("string"!=typeof e||null===e)return e;var t=J.parse(e),r=t.getQuery();if(!r)return e;for(var n=G.parse(r),o=0,i=n.keys();o<i.length;o++){var a=i[o];this.allowedQueryParameters.has(a)||n.set(a,"REDACTED")}return t.setQuery(n.toString()),t.toString()},t.prototype.logResponse=function(e){return this.logger("Response status code: "+e.status),this.logger("Headers: "+JSON.stringify(e.headers,this.sanitize.bind(this),2)),e},t}(ae);function He(e){return ze(e.parameterPath,e.mapper)}function ze(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}function je(e){var t=!1;for(var r in e.responses){var n=e.responses[r];if(n.bodyMapper&&n.bodyMapper.type.name===O.Stream){t=!0;break}}return t}var Le=document.implementation.createDocument(null,null,null),Be=new DOMParser;function Fe(e,t){try{var r=Be.parseFromString(e,"application/xml");!function(e){if(Qe){var t=e.getElementsByTagNameNS(Qe,"parsererror");if(t.length)throw new Error(t.item(0).innerHTML)}}(r);var n=void 0;return n=t&&t.includeRoot?$e(r):$e(r.childNodes[0]),Promise.resolve(n)}catch(e){return Promise.reject(e)}}var Qe="";try{Qe=Be.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){}function $e(e){var t={},r=e.childNodes.length,n=e.childNodes[0],o=n&&1===r&&n.nodeType===Node.TEXT_NODE&&n.nodeValue||void 0,i=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(i){t.$={};for(var a=0;a<i.attributes.length;a++){var s=i.attributes[a];t.$[s.nodeName]=s.nodeValue}o&&(t._=o)}else 0===r?t="":o&&(t=o);if(!o)for(a=0;a<r;a++){var u=e.childNodes[a];if(u.nodeType!==Node.TEXT_NODE){var l=$e(u);t[u.nodeName]?Array.isArray(t[u.nodeName])?t[u.nodeName].push(l):t[u.nodeName]=[t[u.nodeName],l]:t[u.nodeName]=l}}return t}var Ve=new XMLSerializer;function We(e,t){var r=function e(t,r){if(null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t){var n=Le.createElement(r);return n.textContent=null==t?"":t.toString(),[n]}if(Array.isArray(t)){for(var o=[],i=0,a=t;i<a.length;i++)for(var s=a[i],u=0,l=e(s,r);u<l.length;u++){var c=l[u];o.push(c)}return o}if("object"==typeof t){for(var n=Le.createElement(r),f=0,p=Object.keys(t);f<p.length;f++){var h=p[f];if("$"===h)for(var d=0,y=Xe(t[h]);d<y.length;d++){var v=y[d];n.attributes.setNamedItem(v)}else if("_"===h)n.textContent=t[h].toString();else for(var m=0,g=e(t[h],h);m<g.length;m++){var c=g[m];n.appendChild(c)}}return[n]}throw new Error("Illegal value passed to buildObject: "+t)}(e,t&&t.rootName||"root")[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Ve.serializeToString(r)}function Xe(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],i=Le.createAttribute(o);i.value=e[o].toString(),t.push(i)}return t}function Ye(e){return{create:function(t,r){return new Ze(t,e,r)}}}var Ge=["application/json","text/json","text/plain"],Je=["application/xml","application/atom+xml"],Ke={expectedContentTypes:{json:Ge,xml:Je}},Ze=function(e){function t(t,r,n){var o=e.call(this,t,n)||this;return o.jsonContentTypes=r&&r.json||Ge,o.xmlContentTypes=r&&r.xml||Je,o}return C(t,e),t.prototype.sendRequest=function(e){return D(this,void 0,void 0,function(){var t=this;return I(this,function(r){return[2,this._nextPolicy.sendRequest(e).then(function(e){return et(t.jsonContentTypes,t.xmlContentTypes,e)})]})})},t}(ae);function et(e,t,r){return function(e,t,r){var n=function(e){var t='Error "'+e+'" occurred while parsing the response body - '+r.bodyAsText+".",n=e.code||Q.PARSE_ERROR,o=new Q(t,n,r.status,r.request,r);return Promise.reject(o)};if(!r.request.streamResponseBody&&r.bodyAsText){var o=r.bodyAsText,i=r.headers.get("Content-Type")||"",a=i?i.split(";").map(function(e){return e.toLowerCase()}):[];if(0===a.length||a.some(function(t){return-1!==e.indexOf(t)}))return new Promise(function(e){r.parsedBody=JSON.parse(o),e(r)}).catch(n);if(a.some(function(e){return-1!==t.indexOf(e)}))return Fe(o).then(function(e){return r.parsedBody=e,r}).catch(n)}return Promise.resolve(r)}(e,t,r).then(function(e){if(function(e){var t=e.request.shouldDeserialize;return void 0===t||("boolean"==typeof t?t:t(e))}(e)){var t=e.request.operationSpec;if(t&&t.responses){var n=e.status,o=Object.keys(t.responses),i=0===o.length||1===o.length&&"default"===o[0],a=function(e){var t,r=e.request,n=r.operationSpec;if(n){var o=r.operationResponseGetter;t=o?o(n,e):n.responses[e.status]}return t}(e);if(i?200<=n&&n<300:!!a){if(a){if(a.bodyMapper){v=e.parsedBody;t.isXML&&a.bodyMapper.type.name===O.Sequence&&(v="object"==typeof v?v[a.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(a.bodyMapper,v,"operationRes.parsedBody")}catch(c){var s=new Q("Error "+c+" occurred in deserializing the responseBody - "+e.bodyAsText);return s.request=d(e.request),s.response=h(e),Promise.reject(s)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);a.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(a.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}}else{var u=t.responses.default;if(u){var l=je(t)?"Unexpected status code: "+n:e.bodyAsText,c=new Q(l);c.statusCode=n,c.request=d(e.request),c.response=h(e);var f=e.parsedBody;try{if(f){var p=u.bodyMapper;if(p&&"CloudError"===p.serializedName)f.error&&(f=f.error),f.code&&(c.code=f.code),f.message&&(c.message=f.message);else{var y=f;f.error&&(y=f.error),c.code=y.code,y.message&&(c.message=y.message)}if(p){var v=f;t.isXML&&p.type.name===O.Sequence&&(v="object"==typeof f?f[p.xmlElementName]:[]),c.response.parsedBody=t.serializer.deserialize(p,v,"error.response.parsedBody")}}e.headers&&u.headersMapper&&(c.response.parsedHeaders=t.serializer.deserialize(u.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(t){c.message='Error "'+t.message+'" occurred in deserializing the responseBody - "'+e.bodyAsText+'" for the default response.'}return Promise.reject(c)}}}}return Promise.resolve(e)})}function tt(e,t,r){return{create:function(n,o){return new st(n,o,e,t,r)}}}var rt,nt=3e4,ot=3,it=9e4;(rt=e.RetryMode||(e.RetryMode={}))[rt.Exponential=0]="Exponential";var at={maxRetries:ot,retryDelayInMs:nt,maxRetryDelayInMs:it},st=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r)||this;function s(e){return"number"==typeof e}return a.retryCount=s(n)?n:ot,a.retryInterval=s(o)?o:nt,a.maxRetryInterval=s(i)?i:it,a}return C(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return ut(t,e,r)}).catch(function(r){return ut(t,e,r.response,void 0,r)})},t}(ae);function ut(e,t,r,n,o){n=function(e,t,r){t||(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(n,e.maxRetryInterval),t}(e,n,o);var i=t.abortSignal&&t.abortSignal.aborted;if(!i&&function(e,t,r){if(null==t||t<500&&408!==t||501===t||505===t)return!1;if(!r)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(r&&r.retryCount)<e.retryCount}(e,r&&r.status,n))return Ne.info("Retrying request in "+n.retryInterval),m(n.retryInterval).then(function(){return e._nextPolicy.sendRequest(t.clone())}).then(function(r){return ut(e,t,r,n,void 0)}).catch(function(o){return ut(e,t,r,n,o)});if(i||o||!r){var a=n.error||new Q("Failed to send the request.",Q.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return Promise.reject(a)}return Promise.resolve(r)}function lt(e){return void 0===e&&(e="x-ms-client-request-id"),{create:function(t,r){return new ct(t,r,e)}}}var ct=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o._requestIdHeaderName=n,o}return C(t,e),t.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,v()),this._nextPolicy.sendRequest(e)},t}(ae);function ft(){return"x-ms-command-name"}var pt=ft;function ht(){var e,t,r,n,o=[{key:"core-http",value:c.coreHttpVersion}],i=[{key:"OS",value:((e=window.navigator).oscpu||e.platform).replace(" ","")}];return t=o.concat(i),void 0===r&&(r=" "),void 0===n&&(n="/"),t.map(function(e){var t=e.value?""+n+e.value:"";return""+e.key+t}).join(r)}function dt(e){var t=e&&null!=e.key?e.key:"x-ms-command-name",r=e&&null!=e.value?e.value:ht();return{create:function(e,n){return new yt(e,n,t,r)}}}var yt=function(e){function t(t,r,n,o){var i=e.call(this,t,r)||this;return i._nextPolicy=t,i._options=r,i.headerKey=n,i.headerValue=o,i}return C(t,e),t.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},t.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new r),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},t}(ae),vt={handleRedirects:!0,maxRetries:20};function mt(e){return void 0===e&&(e=20),{create:function(t,r){return new gt(t,r,e)}}}var gt=function(e){function t(t,r,n){void 0===n&&(n=20);var o=e.call(this,t,r)||this;return o.maxRetries=n,o}return C(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function e(t,r,n){var o=r.request,i=r.status;var a=r.headers.get("location");if(a&&(300===i||307===i||303===i&&"POST"===o.method)&&(!t.maxRetries||n<t.maxRetries)){var s=J.parse(o.url);return s.setPath(a),o.url=s.toString(),303===i&&(o.method="GET"),t._nextPolicy.sendRequest(o).then(function(r){return e(t,r,n+1)})}return Promise.resolve(r)}(t,e,0)})},t}(ae);var bt=function(e){function t(t,r,n){void 0===n&&(n=30);var o=e.call(this,t,r)||this;return o._retryTimeout=n,o}return C(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return function(e,t,r){if(409===r.status){var n=function(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(r.bodyAsText);if(n){var o=function(e){var t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");t=r[0];return t}(t.url);return function(e,t,r,n){var o=t+"providers/"+r+"/register?api-version=2016-02-01",i=t+"providers/"+r+"?api-version=2016-02-01",a=wt(n);return a.method="POST",a.url=o,e._nextPolicy.sendRequest(a).then(function(t){if(200!==t.status)throw new Error("Autoregistration of "+r+" failed. Please try registering manually.");return function e(t,r,n){var o=wt(n);o.url=r;o.method="GET";return t._nextPolicy.sendRequest(o).then(function(o){var i=o.parsedBody;return!(!o.parsedBody||!i.registrationState||"Registered"!==i.registrationState)||m(1e3*t._retryTimeout).then(function(){return e(t,r,n)})})}(e,i,n)})}(e,o,n,t).catch(function(){return!1}).then(function(n){return n?(t.headers.set("x-ms-client-request-id",v()),e._nextPolicy.sendRequest(t.clone())):r})}}return Promise.resolve(r)}(t,e,r)})},t}(ae);function wt(e,t){void 0===t&&(t=!1);var r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",v()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}var Et=12e4,Rt=function(){function e(e){void 0===e&&(e=Et),this.cachedToken=void 0,this.tokenRefreshBufferMs=e}return e.prototype.setCachedToken=function(e){this.cachedToken=e},e.prototype.getCachedToken=function(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken},e}();function Tt(e,t){var r=new Rt;return{create:function(n,o){return new Pt(n,o,e,t,r)}}}var Pt=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r)||this;return a.credential=n,a.scopes=o,a.tokenCache=i,a}return C(t,e),t.prototype.sendRequest=function(e){return D(this,void 0,void 0,function(){var t;return I(this,function(n){switch(n.label){case 0:return e.headers||(e.headers=new r),[4,this.getToken({abortSignal:e.abortSignal,spanOptions:e.spanOptions})];case 1:return t=n.sent(),e.headers.set(c.HeaderConstants.AUTHORIZATION,"Bearer "+t),[2,this._nextPolicy.sendRequest(e)]}})})},t.prototype.getToken=function(e){return D(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return void 0!==(t=this.tokenCache.getCachedToken())?[3,2]:[4,this.credential.getToken(this.scopes,e)];case 1:t=r.sent()||void 0,this.tokenCache.setCachedToken(t),r.label=2;case 2:return[2,t?t.token:void 0]}})})},t}(ae);function _t(e,t,r,n){return{create:function(o,i){return new xt(o,i,e,t,r,n)}}}var St,xt=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t,r)||this;return s.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,s.DEFAULT_CLIENT_RETRY_COUNT=3,s.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,s.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,s.retryCount="number"==typeof n?n:s.DEFAULT_CLIENT_RETRY_COUNT,s.retryInterval="number"==typeof o?o:s.DEFAULT_CLIENT_RETRY_INTERVAL,s.minRetryInterval="number"==typeof i?i:s.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,s.maxRetryInterval="number"==typeof a?a:s.DEFAULT_CLIENT_MAX_RETRY_INTERVAL,s}return C(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then(function(r){return function e(t,r,n,o,i){o=function(e,t,r){t||(t={retryCount:0,retryInterval:0});r&&(t.error&&(r.innerError=t.error),t.error=r);t.retryCount++;var n=Math.pow(2,t.retryCount)-1,o=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval));return n*=o,t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(t,o,i);return i&&i.code&&function(e,t){var r;if(!t)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");r=t&&t.retryCount;return r<e.retryCount}(t,o)&&("ETIMEDOUT"===i.code||"ESOCKETTIMEDOUT"===i.code||"ECONNREFUSED"===i.code||"ECONNRESET"===i.code||"ENOENT"===i.code)?m(o.retryInterval).then(function(){return t._nextPolicy.sendRequest(r.clone())}).then(function(n){return e(t,r,n,o,i)}).catch(function(i){return e(t,r,n,o,i)}):null!=i?(i=o.error,Promise.reject(i)):Promise.resolve(n)}(t,e,r)})},t}(ae);(St=e.QueryCollectionFormat||(e.QueryCollectionFormat={})).Csv=",",St.Ssv=" ",St.Tsv="\t",St.Pipes="|",St.Multi="Multi";var Ot=new Error("ProxyPolicy is not supported in browser environment");function At(e){}function qt(e){return{create:function(e,t){throw Ot}}}!function(e){function t(t,r){e.call(this,t,r);throw Ot}C(t,e),t.prototype.sendRequest=function(e){throw Ot}}(ae);var Ct=c.HttpConstants.StatusCodes;function Nt(){return{create:function(e,t){return new Dt(e,t)}}}var Dt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o._handleResponse=n||o._defaultResponseHandler,o}return C(t,e),t.prototype.sendRequest=function(e){return D(this,void 0,void 0,function(){var t=this;return I(this,function(r){return[2,this._nextPolicy.sendRequest(e.clone()).then(function(r){return r.status!==Ct.TooManyRequests?r:t._handleResponse(e,r)})]})})},t.prototype._defaultResponseHandler=function(e,r){return D(this,void 0,void 0,function(){var n,o,i=this;return I(this,function(a){return(n=r.headers.get(c.HeaderConstants.RETRY_AFTER))&&(o=t.parseRetryAfterHeader(n))?[2,m(o).then(function(t){return i._nextPolicy.sendRequest(e)})]:[2,r]})})},t.parseRetryAfterHeader=function(e){var r=Number(e);return Number.isNaN(r)?t.parseDateRetryAfterHeader(e):1e3*r},t.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},t}(ae);function It(e){return{create:function(t,r){return new Mt(t,r,e)}}}var Mt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.authenticationProvider=n,o}return C(t,e),t.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},t.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then(function(e){return t._nextPolicy.sendRequest(e)})},t}(ae),Ut={enable:!0};function kt(e){return{create:function(t,r){return new Ht(t,r,e||Ut)}}}var Ht=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.keepAliveOptions=n,o}return C(t,e),t.prototype.sendRequest=function(e){return D(this,void 0,void 0,function(){return I(this,function(t){return e.keepAlive=this.keepAliveOptions.enable,[2,this._nextPolicy.sendRequest(e)]})})},t}(ae),zt=function(){function e(){}return e.prototype.context=function(){return{spanId:"",traceId:""}},e.prototype.end=function(e){},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.isRecordingEvents=function(){return!1},e}(),jt=function(){function e(){}return e.prototype.toBytes=function(e){return new ArrayBuffer(0)},e.prototype.fromBytes=function(e){return null},e}(),Lt=function(){function e(){}return e.prototype.inject=function(e,t,r){},e.prototype.extract=function(e,t){return null},e}(),Bt=function(){function e(){}return e.prototype.startSpan=function(e,t){return new zt},e.prototype.getCurrentSpan=function(){return new zt},e.prototype.withSpan=function(e,t){return t()},e.prototype.bind=function(e,t){return e},e.prototype.recordSpanData=function(e){},e.prototype.getBinaryFormat=function(){return new jt},e.prototype.getHttpTextFormat=function(){return new Lt},e}();var Ft,Qt,$t=1,Vt=Symbol.for("@azure/core-tracing.tracerCache");function Wt(){var e=self,t=e[Vt];if(t){if(t.version!==$t)throw new Error("Two incompatible versions of @azure/core-tracing have been loaded.\n         This library is "+$t+", existing is "+t.version+".");Ft=t}else Ft={tracer:void 0,version:$t},e[Vt]=Ft}function Xt(){return Ft||Wt(),Ft}!function(e){e[e.UNSAMPLED=0]="UNSAMPLED",e[e.SAMPLED=1]="SAMPLED"}(Qt||(Qt={}));var Yt="00";function Gt(){return{create:function(e,t){return new Jt(e,t)}}}var Jt=function(e){function t(t,r){return e.call(this,t,r)||this}return C(t,e),t.prototype.sendRequest=function(e){return D(this,void 0,void 0,function(){var t,r,n,o,i,a,s;return I(this,function(u){switch(u.label){case 0:if(!e.spanOptions||!e.spanOptions.parent)return[2,this._nextPolicy.sendRequest(e)];t=function(){var e=Xt();return e.tracer||(e.tracer=new Bt),e.tracer}(),r=t.startSpan("core-http",e.spanOptions),u.label=1;case 1:return u.trys.push([1,3,,4]),n=r.context(),(o=function(e){var t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),!t.length){var r=(e.traceFlags||Qt.UNSAMPLED).toString(16),n=1===r.length?"0"+r:r;return Yt+"-"+e.traceId+"-"+e.spanId+"-"+n}}(n))&&(e.headers.set("traceparent",o),(i=n.traceState&&n.traceState.serialize())&&e.headers.set("tracestate",i)),[4,this._nextPolicy.sendRequest(e)];case 2:return a=u.sent(),r.end(),[2,a];case 3:throw s=u.sent(),r.end(),s;case 4:return[2]}})})},t}(ae),Kt=function(){function t(e,t){var r,n,o,i=this;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||new $,this._requestPolicyOptions=new se(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))Ne.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{var a=void 0;if(Y(e)){Ne.info("ServiceClient: creating bearer token authentication policy from provided credentials");n=void 0,o=i,a={create:function(t,r){return void 0===n&&(n=Tt(e,(o.baseUri||"")+"/.default")),n.create(t,r)}}}else if(e&&"function"==typeof e.signRequest)Ne.info("ServiceClient: creating signing policy from provided credentials"),a=It(e);else if(void 0!==e)throw new Error("The credentials argument must implement the TokenCredential interface");if(Ne.info("ServiceClient: using default request policies"),r=function(e,t){var r=[];t.generateClientRequestIdHeader&&r.push(lt(t.clientRequestIdHeaderName));e&&r.push(e);var n=Zt(t.userAgentHeaderName,pt),o=Zt(t.userAgent,ht);n&&o&&r.push(dt({key:n,value:o}));r.push(mt()),r.push(function(e){return void 0===e&&(e=30),{create:function(t,r){return new bt(t,r,e)}}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push(tt()),r.push(_t()),r.push(Nt()));r.push(Ye(t.deserializationContentTypes)),t.proxySettings?r.push(qt()):void 0;return r.push(Ue(Ne.info,{})),r}(a,t),t.requestPolicyFactories){var s=t.requestPolicyFactories(r);s&&(r=s)}}this._requestPolicyFactories=r}return t.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{e instanceof A?(e.validateRequestProperties(),t=e):t=(t=new A).prepare(e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(var n=this._requestPolicyFactories.length-1;n>=0;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},t.prototype.sendOperationRequest=function(t,r,n){return D(this,void 0,void 0,function(){var o,i,a,s,u,l,c,f,p,h,d,y,v,m,g,b,w,E,R,T,P,_,S,x,q,C,N,D,M,U;return I(this,function(I){switch(I.label){case 0:"function"==typeof t.options&&(n=t.options,t.options=void 0),o=new A,I.label=1;case 1:if(I.trys.push([1,6,,7]),!(a=r.baseUrl||this.baseUri))throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");if(o.method=r.httpMethod,o.operationSpec=r,s=J.parse(a),r.path&&s.appendPath(r.path),r.urlParameters&&r.urlParameters.length>0)for(u=0,l=r.urlParameters;u<l.length;u++)c=l[u],f=er(this,t,c,r.serializer),f=r.serializer.serialize(c.mapper,f,He(c)),c.skipEncoding||(f=encodeURIComponent(f)),s.replaceAll("{"+(c.mapper.serializedName||He(c))+"}",f);if(r.queryParameters&&r.queryParameters.length>0)for(p=0,h=r.queryParameters;p<h.length;p++)if(d=h[p],null!=(y=er(this,t,d,r.serializer))){if(y=r.serializer.serialize(d.mapper,y,He(d)),null!=d.collectionFormat)if(d.collectionFormat===e.QueryCollectionFormat.Multi)if(0===y.length)y="";else for(m in y)v=y[m],y[m]=null==v?"":v.toString();else y=y.join(d.collectionFormat);if(!d.skipEncoding)if(Array.isArray(y))for(m in y)y[m]=encodeURIComponent(y[m]);else y=encodeURIComponent(y);s.setQueryParameter(d.mapper.serializedName||He(d),y)}if(o.url=s.toString(),(g=r.contentType||this.requestContentType)&&o.headers.set("Content-Type",g),r.headerParameters)for(b=0,w=r.headerParameters;b<w.length;b++)if(E=w[b],null!=(R=er(this,t,E,r.serializer)))if(R=r.serializer.serialize(E.mapper,R,He(E)),T=E.mapper.headerCollectionPrefix)for(P=0,_=Object.keys(R);P<_.length;P++)S=_[P],o.headers.set(T+S,R[S]);else o.headers.set(E.mapper.serializedName||He(E),R);if(x=t.options){if(x.customHeaders)for(q in x.customHeaders)o.headers.set(q,x.customHeaders[q]);x.abortSignal&&(o.abortSignal=x.abortSignal),x.timeout&&(o.timeout=x.timeout),x.onUploadProgress&&(o.onUploadProgress=x.onUploadProgress),x.onDownloadProgress&&(o.onDownloadProgress=x.onDownloadProgress),x.spanOptions&&(o.spanOptions=x.spanOptions)}o.withCredentials=this._withCredentials,function(e,t,r,n){if(n.requestBody&&n.requestBody.mapper){t.body=er(e,r,n.requestBody,n.serializer);var o=n.requestBody.mapper,i=o.required,a=o.xmlName,s=o.xmlElementName,u=o.serializedName,l=o.type.name;try{if(null!=t.body||i){var c=He(n.requestBody);t.body=n.serializer.serialize(o,t.body,c);var f=l===O.Stream;n.isXML?l===O.Sequence?t.body=We(function(e,t){var r;return Array.isArray(e)||(e=[e]),(r={})[t]=e,r}(t.body,s||a||u),{rootName:a||u}):f||(t.body=We(t.body,{rootName:a||u})):f||(t.body=JSON.stringify(t.body))}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(u,void 0,"  ")+".")}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(var p=0,h=n.formDataParameters;p<h.length;p++){var d=h[p],y=er(e,r,d,n.serializer);if(null!=y){var v=d.mapper.serializedName||He(d);t.formData[v]=n.serializer.serialize(d.mapper,y,He(d))}}}}(this,o,t,r),null==o.streamResponseBody&&(o.streamResponseBody=je(r)),C=void 0,N=void 0,I.label=2;case 2:return I.trys.push([2,4,,5]),[4,this.sendRequest(o)];case 3:return C=I.sent(),[3,5];case 4:return D=I.sent(),N=D,[3,5];case 5:return N?(N.response&&(N.details=rr(N.response,r.responses[N.statusCode]||r.responses.default)),i=Promise.reject(N)):i=Promise.resolve(rr(C,r.responses[C.status])),[3,7];case 6:return M=I.sent(),i=Promise.reject(M),[3,7];case 7:return(U=n)&&i.then(function(e){return U(null,e._response.parsedBody,e._response.request,e._response)}).catch(function(e){return U(e)}),[2,i]}})})},t}();function Zt(e,t){var r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function er(e,t,r,n){return function e(t,r,n,o,i){var a;"string"==typeof n&&(n=[n]);if(Array.isArray(n)){if(n.length>0){if(o.isConstant)a=o.defaultValue;else{var s=tr(r,n);s.propertyFound||(s=tr(t,n));var u=!1;s.propertyFound||(u=o.required||"options"===n[0]&&2===n.length),a=u?o.defaultValue:s.propertyValue}var l=ze(n,o);i.serialize(o,a,l)}}else for(var c in o.required&&(a={}),n){var f=o.type.modelProperties[c],p=n[c],h=e(t,r,p,f,i),d=ze(p,f);i.serialize(f,h,d),void 0!==h&&(a||(a={}),a[c]=h)}return a}(e,t,r.parameterPath,r.mapper,n)}function tr(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var o=t[n];if(!(null!=e&&o in e))break;e=e[o]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function rr(e,t){var r,n=e.parsedHeaders,o=t&&t.bodyMapper,i=function(t){return Object.defineProperty(t,"_response",{value:e})};if(o){var a=o.type.name;if("Stream"===a)return i(N({},n,{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));var s="Composite"===a&&o.type.modelProperties||{},u=Object.keys(s).some(function(e){return""===s[e].serializedName});if("Sequence"===a||u){for(var l=(e.parsedBody||[]).slice(),c=0,f=Object.keys(s);c<f.length;c++){var p=f[c];s[p].serializedName&&(l[p]=e.parsedBody[p])}if(n)for(var h=0,d=Object.keys(n);h<d.length;h++){l[p=d[h]]=n[p]}return i(l),l}if("Composite"===a||"Dictionary"===a)return i(N({},n,e.parsedBody))}return o||"HEAD"===e.request.method||("object"!=typeof(r=e.parsedBody)&&"function"!=typeof r||null===r)?i(N({},n,{body:e.parsedBody})):i(N({},n,e.parsedBody))}var nr=c.HeaderConstants,or="Basic",ir=function(){function e(e,t,r){if(void 0===r&&(r=or),this.authorizationScheme=or,null==e||"string"!=typeof e.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=e,this.password=t,this.authorizationScheme=r}return e.prototype.signRequest=function(e){var t=this.userName+":"+this.password,n=this.authorizationScheme+" "+btoa(t);return e.headers||(e.headers=new r),e.headers.set(nr.AUTHORIZATION,n),Promise.resolve(e)},e}(),ar=function(){function e(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}return e.prototype.signRequest=function(e){if(!e)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader)for(var t in e.headers||(e.headers=new r),this.inHeader)e.headers.set(t,this.inHeader[t]);if(this.inQuery){if(!e.url)return Promise.reject(new Error("url cannot be null in the request object."));for(var n in e.url.indexOf("?")<0&&(e.url+="?"),this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=n+"="+this.inQuery[n]}return Promise.resolve(e)},e}(),sr=function(e){function t(t){if(!t||t&&"string"!=typeof t)throw new Error("topicKey cannot be null or undefined and must be of type string.");var r={inHeader:{"aeg-sas-key":t}};return e.call(this,r)||this}return C(t,e),t}(ar);e.ApiKeyCredentials=ar,e.BaseRequestPolicy=ae,e.BasicAuthenticationCredentials=ir,e.BearerTokenAuthenticationPolicy=Pt,e.Constants=c,e.DefaultHttpClient=$,e.ExpiringAccessTokenCache=Rt,e.HttpHeaders=r,e.MapperType=O,e.RequestPolicyOptions=se,e.RestError=Q,e.Serializer=E,e.ServiceClient=Kt,e.TopicCredentials=sr,e.URLBuilder=J,e.URLQuery=G,e.WebResource=A,e.applyMixins=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(r){e.prototype[r]=t.prototype[r]})})},e.bearerTokenAuthenticationPolicy=Tt,e.createPipelineFromOptions=function(e,t){var r=[],n=void 0;if(e.userAgentOptions&&e.userAgentOptions.userAgentPrefix){var o=[];o.push(e.userAgentOptions.userAgentPrefix);var i=ht();-1===o.indexOf(i)&&o.push(i),n=o.join(" ")}var a=N({},Ut,e.keepAliveOptions),s=N({},at,e.retryOptions),u=N({},vt,e.redirectOptions),l=e.proxyOptions||void 0;p&&l&&r.push(qt());var c=N({},Ke,e.deserializationOptions),f=N({},Me,e.loggingOptions);return r.push(Gt(),kt(a),dt({value:n}),lt(),Ye(c.expectedContentTypes),Nt(),_t(),tt(s.maxRetries,s.retryDelayInMs,s.maxRetryDelayInMs)),u.handleRedirects&&r.push(mt(u.maxRetries)),t&&r.push(t),r.push(Ue(f.logger,f.logPolicyOptions)),e.updatePipelinePolicies&&(r=e.updatePipelinePolicies(r)),{httpClient:e.httpClient,requestPolicyFactories:r}},e.delay=m,e.deserializationPolicy=Ye,e.deserializeResponseBody=et,e.encodeUri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},e.executePromisesSequentially=function(e,t){var r=Promise.resolve(t);return e.forEach(function(e){r=r.then(e)}),r},e.exponentialRetryPolicy=tt,e.flattenResponse=rr,e.generateClientRequestIdPolicy=lt,e.generateUuid=v,e.getDefaultProxySettings=At,e.getDefaultUserAgentValue=ht,e.isDuration=b,e.isNode=p,e.isTokenCredential=Y,e.isValidUuid=y,e.keepAlivePolicy=kt,e.logPolicy=Ue,e.parseXML=Fe,e.promiseToCallback=function(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){t(void 0,e)},function(e){t(e)})}},e.promiseToServiceCallback=function(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){process.nextTick(t,void 0,e.parsedBody,e.request,e)},function(e){process.nextTick(t,e)})}},e.proxyPolicy=qt,e.redirectPolicy=mt,e.serializeObject=function e(t){if(null!=t){if(t instanceof Uint8Array)return t=n(t);if(t instanceof Date)return t.toISOString();if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++)r.push(e(t[o]));return r}if("object"==typeof t){var i={};for(var a in t)i[a]=e(t[a]);return i}return t}},e.signingPolicy=It,e.stringifyXML=We,e.stripRequest=d,e.stripResponse=h,e.systemErrorRetryPolicy=_t,e.throttlingRetryPolicy=Nt,e.tracingPolicy=Gt,e.userAgentPolicy=dt,Object.defineProperty(e,"__esModule",{value:!0})});