!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((t=t||self).Azure=t.Azure||{},t.Azure.Core=t.Azure.Core||{},t.Azure.Core.Tracing={}))}(this,function(t){"use strict";var n=function(){function t(){}return t.prototype.context=function(){return{spanId:"",traceId:""}},t.prototype.end=function(t){},t.prototype.setAttribute=function(t,n){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,n){return this},t.prototype.addLink=function(t,n){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.isRecordingEvents=function(){return!1},t}(),e=function(){function t(){}return t.prototype.toBytes=function(t){return new ArrayBuffer(0)},t.prototype.fromBytes=function(t){return null},t}(),r=function(){function t(){}return t.prototype.inject=function(t,n,e){},t.prototype.extract=function(t,n){return null},t}(),o=function(){function t(){}return t.prototype.startSpan=function(t,e){return new n},t.prototype.getCurrentSpan=function(){return new n},t.prototype.withSpan=function(t,n){return n()},t.prototype.bind=function(t,n){return t},t.prototype.recordSpanData=function(t){},t.prototype.getBinaryFormat=function(){return new e},t.prototype.getHttpTextFormat=function(){return new r},t}();var a,p=1,i=Symbol.for("@azure/core-tracing.tracerCache");function u(){var t=self,n=t[i];if(n){if(n.version!==p)throw new Error("Two incompatible versions of @azure/core-tracing have been loaded.\n         This library is "+p+", existing is "+n.version+".");a=n}else a={tracer:void 0,version:p},t[i]=a}function s(){return a||u(),a}var c=function(){function t(t){this._state=t}return t.prototype.get=function(t){throw new Error("Method not implemented.")},t.prototype.set=function(t,n){throw new Error("Method not implemented.")},t.prototype.unset=function(t){throw new Error("Method not implemented")},t.prototype.serialize=function(){return this._state||""},t}();var d,f=function(){function t(t,n,e){if(void 0===n&&(n=""),void 0===e&&(e={}),function(t){return void 0!==t.getWrappedTracer}(t)){var r=(o=e.parent)&&void 0!==o.getWrappedSpan?e.parent.getWrappedSpan():void 0;this._span=t.getWrappedTracer().startChildSpan({name:n,childOf:r}),this._span.start()}else this._span=t;var o}return t.prototype.getWrappedSpan=function(){return this._span},t.prototype.end=function(t){this._span.end()},t.prototype.context=function(){var t=this._span.spanContext;return{spanId:t.spanId,traceId:t.traceId,traceFlags:t.options,traceState:new c(t.traceState)}},t.prototype.setAttribute=function(t,n){return this._span.addAttribute(t,n),this},t.prototype.setAttributes=function(t){return this._span.attributes=t,this},t.prototype.addEvent=function(t,n){throw new Error("Method not implemented.")},t.prototype.addLink=function(t,n){return this._span.addLink(t.traceId,t.spanId,0,n),this},t.prototype.setStatus=function(t){return this._span.setStatus(t.code,t.message),this},t.prototype.updateName=function(t){return this._span.name=t,this},t.prototype.isRecordingEvents=function(){return!!this._span.traceId},t}(),h=function(){function t(t){this._tracer=t}return t.prototype.getWrappedTracer=function(){return this._tracer},t.prototype.startSpan=function(t,n){return new f(this,t,n)},t.prototype.getCurrentSpan=function(){return null},t.prototype.withSpan=function(t,n){throw new Error("Method not implemented.")},t.prototype.bind=function(t,n){throw new Error("Method not implemented.")},t.prototype.recordSpanData=function(t){throw new Error("Method not implemented.")},t.prototype.getBinaryFormat=function(){throw new Error("Method not implemented.")},t.prototype.getHttpTextFormat=function(){throw new Error("Method not implemented.")},t}(),E=function(t,n){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function S(t,n){function e(){this.constructor=t}E(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(d=t.CanonicalCode||(t.CanonicalCode={}))[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED";var y,I=function(n){function e(e,r,o,a,p,i){void 0===i&&(i=Date.now());var u=n.call(this)||this;return u._tracer=e,u.name=r,u.kind=a,u.startTime=i,u.parentSpanId=p,u.status={code:t.CanonicalCode.OK},u.endCalled=!1,u._context=o,u}return S(e,n),e.prototype.tracer=function(){return this._tracer},e.prototype.context=function(){return this._context},e.prototype.end=function(t){this.endCalled=!0},e.prototype.setStatus=function(t){return this.status=t,this},e.prototype.isRecordingEvents=function(){return!0},e}(n);(y=t.SpanKind||(t.SpanKind={}))[y.INTERNAL=0]="INTERNAL",y[y.SERVER=1]="SERVER",y[y.CLIENT=2]="CLIENT",y[y.PRODUCER=3]="PRODUCER",y[y.CONSUMER=4]="CONSUMER";var N,l=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.traceIdCounter=0,t.spanIdCounter=0,t.rootSpans=[],t.knownSpans=[],t}return S(e,n),e.prototype.getNextTraceId=function(){return this.traceIdCounter++,String(this.traceIdCounter)},e.prototype.getNextSpanId=function(){return this.spanIdCounter++,String(this.spanIdCounter)},e.prototype.getRootSpans=function(){return this.rootSpans},e.prototype.getKnownSpans=function(){return this.knownSpans},e.prototype.getActiveSpans=function(){return this.knownSpans.filter(function(t){return!t.endCalled})},e.prototype.getSpanGraph=function(t){for(var n=this.knownSpans.filter(function(n){return n.context().traceId===t}),e=[],r=new Map,o=0,a=n;o<a.length;o++){var p=a[o],i=p.context().spanId,u={name:p.name,children:[]};if(r.set(i,u),p.parentSpanId){var s=r.get(p.parentSpanId);if(!s)throw new Error("Span with name "+u.name+" has an unknown parentSpan with id "+p.parentSpanId);s.children.push(u)}else e.push(u)}return{roots:e}},e.prototype.startSpan=function(n,e){void 0===e&&(e={});var r,o=this._getParentContext(e),a=!1;o&&o.traceId?r=o.traceId:(r=this.getNextTraceId(),a=!0);var p={traceId:r,spanId:this.getNextSpanId()},i=new I(this,n,p,e.kind||t.SpanKind.INTERNAL,o?o.spanId:void 0,e.startTime);return this.knownSpans.push(i),a&&this.rootSpans.push(i),i},e.prototype._getParentContext=function(t){var n=t.parent;if(n)return"traceId"in n?n:n.context()},e}(o);(N=t.TraceFlags||(t.TraceFlags={}))[N.UNSAMPLED=0]="UNSAMPLED",N[N.SAMPLED=1]="SAMPLED";var A="00";t.NoOpSpan=n,t.NoOpTracer=o,t.OpenCensusSpanWrapper=f,t.OpenCensusTracerWrapper=h,t.TestSpan=I,t.TestTracer=l,t.extractSpanContextFromTraceParentHeader=function(t){var n=t.split("-");if(4===n.length){var e=n[0],r=n[1],o=n[2],a=n[3];if(e===A)return{spanId:o,traceId:r,traceFlags:parseInt(a,16)}}},t.getTraceParentHeader=function(n){var e=[];if(n.traceId||e.push("traceId"),n.spanId||e.push("spanId"),!e.length){var r=(n.traceFlags||t.TraceFlags.UNSAMPLED).toString(16),o=1===r.length?"0"+r:r;return A+"-"+n.traceId+"-"+n.spanId+"-"+o}},t.getTracer=function(){var t=s();return t.tracer||(t.tracer=new o),t.tracer},t.setTracer=function(t){s().tracer=t},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=core-tracing.min.js.map
