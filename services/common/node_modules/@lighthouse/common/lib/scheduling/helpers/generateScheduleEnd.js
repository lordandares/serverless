import { includes } from 'lodash/fp';
import moment from 'moment-timezone';
import { Unit } from '../scheduling.types';

/**
 * Generates a schedule end datetime based on the start and frequency
 */
export function generateScheduleEnd(_ref) {
  var frequency = _ref.frequency,
      start = _ref.start,
      timezone = _ref.timezone;
  var frequencyUnit = frequency.unit,
      frequencyValue = frequency.value;
  var isFrequencyLessThanWeek = includes(frequencyUnit, [Unit.Millisecond, Unit.Second, Unit.Minute, Unit.Hour, Unit.Day]);
  var mStart = moment.tz(start, timezone); // NOTE: if frequency unit less than a week we must set end to jump a week
  // so that we can ensure that we are within a service interval

  var end = isFrequencyLessThanWeek ? mStart.add(1, Unit.Week).valueOf() : mStart.add(frequencyValue * 2, frequencyUnit).valueOf();
  return end;
}
//# sourceMappingURL=generateScheduleEnd.js.map